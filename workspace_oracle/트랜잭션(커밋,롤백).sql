-- *** 트랜잭션
-- 데이터 처리의 한 단위
-- 논리적인 작업 단위 데이터의 일관성을 유지하면서 안정적으로 데이터를 복구 시키기위해 사용
-- ALL-OR-NOTHING

--COMMIT , ROLLBACK
-- DML에서 사용 
-- COMMIT 지금까지 작업한거 영구 저장
-- ROLLBACK 마지막으로 커밋한 시점으로 돌아가기

-- OUTO COMMIT
DELETE FROM DEPT02
WHERE DEPTNO = 40;
COMMIT;

SELECT * FROM DEPT02;

CREATE TABLE DEPT03
AS
SELECT * FROM DEPT; -- 테이블을 만들때 자동으로 오토 커밋이 된다
ROLLBACK;

-- SAVE POINT
-- SAVEPOINT LABEL_NAME;
-- ROLLBACK TO LABEL_NAME;
SELECT * FROM DEPT02;

DELETE FROM DEPT02
WHERE DEPTNO = 30;

SAVEPOINT S1;

DELETE FROM DEPT02
WHERE DEPTNO = 20;

SAVEPOINT S2;

DELETE FROM DEPT02
WHERE DEPTNO = 10;

SAVEPOINT S3;

ROLLBACK TO S1;
ROLLBACK TO S2;

